// Code generated by testifylint/internal/testgen. DO NOT EDIT.

package errornil

import (
	"io"
	"testing"
	"unsafe"

	"github.com/stretchr/testify/assert"
)

func TestErrorNilChecker(t *testing.T) {
	var err error

	// Invalid.
	{
		assert.NoError(t, err)                                   // want "error-nil: use assert\\.NoError"
		assert.NoErrorf(t, err, "msg with args %d %s", 42, "42") // want "error-nil: use assert\\.NoErrorf"
		assert.Error(t, err)                                     // want "error-nil: use assert\\.Error"
		assert.Errorf(t, err, "msg with args %d %s", 42, "42")   // want "error-nil: use assert\\.Errorf"
		assert.NoError(t, err)                                   // want "error-nil: use assert\\.NoError"
		assert.NoErrorf(t, err, "msg with args %d %s", 42, "42") // want "error-nil: use assert\\.NoErrorf"
		assert.NoError(t, err)                                   // want "error-nil: use assert\\.NoError"
		assert.NoErrorf(t, err, "msg with args %d %s", 42, "42") // want "error-nil: use assert\\.NoErrorf"
		assert.Error(t, err)                                     // want "error-nil: use assert\\.Error"
		assert.Errorf(t, err, "msg with args %d %s", 42, "42")   // want "error-nil: use assert\\.Errorf"
		assert.Error(t, err)                                     // want "error-nil: use assert\\.Error"
		assert.Errorf(t, err, "msg with args %d %s", 42, "42")   // want "error-nil: use assert\\.Errorf"
		assert.NoError(t, err)                                   // want "error-nil: use assert\\.NoError"
		assert.NoErrorf(t, err, "msg with args %d %s", 42, "42") // want "error-nil: use assert\\.NoErrorf"
		assert.Error(t, err)                                     // want "error-nil: use assert\\.Error"
		assert.Errorf(t, err, "msg with args %d %s", 42, "42")   // want "error-nil: use assert\\.Errorf"
	}

	// Valid.
	{
		assert.NoError(t, err)
		assert.NoErrorf(t, err, "msg with args %d %s", 42, "42")
		assert.Error(t, err)
		assert.Errorf(t, err, "msg with args %d %s", 42, "42")
	}

	// Ignored.
	{
		assert.Nil(t, nil)
		assert.Nilf(t, nil, "msg with args %d %s", 42, "42")
		assert.NotNil(t, nil)
		assert.NotNilf(t, nil, "msg with args %d %s", 42, "42")
		assert.Equal(t, err, err)
		assert.Equalf(t, err, err, "msg with args %d %s", 42, "42")
		assert.Equal(t, nil, nil)
		assert.Equalf(t, nil, nil, "msg with args %d %s", 42, "42")
		assert.NotEqual(t, err, err)
		assert.NotEqualf(t, err, err, "msg with args %d %s", 42, "42")
		assert.NotEqual(t, nil, nil)
		assert.NotEqualf(t, nil, nil, "msg with args %d %s", 42, "42")
	}
}

func TestErrorNilChecker_ErrorDetection(t *testing.T) {
	errOp := func() error { return io.EOF }
	var a error
	var b withErroredMethod
	_, c := b.Get2()

	assert.NoError(t, a)        // want "error-nil: use assert\\.NoError"
	assert.NoError(t, b.Get1()) // want "error-nil: use assert\\.NoError"
	assert.NoError(t, c)        // want "error-nil: use assert\\.NoError"
	assert.NoError(t, errOp())  // want "error-nil: use assert\\.NoError"
}

func TestErrorNilChecker_ValidNils(t *testing.T) {
	var (
		ptr   *int
		iface any
		ch    chan error
		sl    []error
		fn    func()
		m     map[int]int
		uPtr  unsafe.Pointer
	)

	assert.Nil(t, ptr)
	assert.NotNil(t, ptr)
	assert.Nil(t, iface)
	assert.NotNil(t, iface)
	assert.Nil(t, ch)
	assert.NotNil(t, ch)
	assert.Nil(t, sl)
	assert.NotNil(t, sl)
	assert.Nil(t, fn)
	assert.NotNil(t, fn)
	assert.Nil(t, m)
	assert.NotNil(t, m)
	assert.Nil(t, uPtr)
	assert.NotNil(t, uPtr)
}

type withErroredMethod struct{}

func (withErroredMethod) Get1() error        { return nil }
func (withErroredMethod) Get2() (int, error) { return 0, nil }
